<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>è´ªåƒè›‡</title>
    <style>
    .map{
        width: 800px;
        height: 600px;
        background-color: #ccc;
        position: relative;
    }
    </style>
</head>
<body>
    <div class="map"></div>
</body>
<script>
    
    // è‡ªè°ƒç”¨å‡½æ•°-->é£Ÿç‰©
    (function (){
        // åˆ é™¤ä¹‹å‰çš„ğŸ
        remove();
        
        // å­˜æ”¾é£Ÿç‰©
        var elements = [];
        // é£Ÿç‰©çš„æ„é€ æ–¹æ³•
        function Food(x,y,width,height,color){
            // åæ ‡
            this.x = x || 0;
            this.y = y || 0;
            // é£Ÿç‰©çš„å¤§å°
            this.width = width || 20;
            this.height = height || 20;
            // é£Ÿç‰©é¢œè‰²
            this.color = color || "#555";
        }

        Food.prototype.init = function (map){
            var food = document.createElement("div");
            map.appendChild(food);
            // è„±ç¦»æ–‡æ¡£æµ
            food.style.position = "absolute";
            // è®¾ç½®æ ·å¼
            food.style.width = this.width+"px";
            food.style.height = this.height+"px";
            food.style.backgroundColor = this.color;    //æ³¨æ„ï¼šæ˜¯backgroundColorï¼Œä¸æ˜¯color
            // ç”Ÿæˆå¹¶è®¾ç½®éšæœºåæ ‡
            // æ³¨æ„ï¼šoffsetWidthã€offsetHeightä¸­çš„sæ˜¯å°å†™
            this.x = parseInt(Math.random() * (map.offsetWidth / this.width)) * this.width;
            this.y = parseInt(Math.random() * (map.offsetHeight / this.height)) * this.height;
            food.style.left = this.x + "px";
            food.style.top =  this.y + "px";
            // åŠ å…¥åˆ°elementsæ•°ç»„ä¸­----ç›®çš„æ˜¯ä¸ºäº†åˆ é™¤
            elements.push(food);
        };

        // åˆ é™¤
        function remove(){
            for(var i=0;i<elements;i++){
                elements[i].parentNode.removeChild(elements[i]);
                elements.splice(i,1);
            }
        };
        window.Food = Food;

    }());

    // è‡ªè°ƒç”¨å‡½æ•°--> å°è›‡
    (function(){
        var elements = [];
        //
        function Snake(width,height,direction){
            this.width = width || 20;
            this.height = height || 20;
            this.body = [
                {x:3,y:3,color:"red"},  //å¤´éƒ¨
                {x:2,y:3,color:"orange"},   // èº«ä½“
                {x:1,y:3,color:"orange"}    // èº«ä½“
            ];
            this.direction = direction;
        };
        Snake.prototype.init = function(map){
            // åˆ é™¤ä¹‹å‰çš„ğŸ
            remove();
            for(var i=0;i<this.body.length;i++){
                // åˆ›å»ºå…ƒç´ å¹¶æ·»åŠ åˆ°åœ°å›¾
                var div = document.createElement("div");
                map.appendChild(div);
                div.style.width = this.width+"px";
                div.style.height = this.height+"px";
                div.style.position= "absolute";
                div.style.left = this.body[i].x * this.width+"px" ;
                div.style.top = this.body[i].y * this.height+"px" ;
                div.style.backgroundColor = this.body[i].color;

                elements.push(div);
            }

        };
        // åˆ é™¤
        function remove(){
            for(var i=0;i<elements;i++){
                elements[i].parentNode.removeChild(elements[i]);
                elements.splice(i,1);
            }
        };
        window.Snake = Snake;
    }());

    // æµ‹è¯•ä»£ç 
    var food = new Food();
    var snake = new Snake();
    food.init(document.querySelector(".map"));
    snake.init(document.querySelector(".map"));
</script>
</html>